<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Aå´ - Firebase CSVæ›´æ–°</title>
</head>
<body>
  <h1>ğŸš€ Aå´: ã‚¯ãƒªãƒƒã‚¯ã§å…¨ä¸–ç•Œå³åŒæœŸ</h1>
  <button onclick="updateData()">Item1ã‚’trueã«æ›´æ–°</button>
  <button onclick="addRow()">æ–°è¡Œè¿½åŠ </button>
  <div id="status">æ¥ç¶šä¸­...</div>

  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js';
    import { getDatabase, ref, onValue, set } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js';
    
    const firebaseConfig = {
    apiKey: "AIzaSyDyr-r4YdBjark6GpoUgPBtW8NLMj6hUjE",
    authDomain: "csv-sync-app-35682.firebaseapp.com",
    databaseURL: "https://csv-sync-app-35682-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "csv-sync-app-35682",
    storageBucket: "csv-sync-app-35682.firebasestorage.app",
    messagingSenderId: "748623311917",
    appId: "1:748623311917:web:0a1118a75dd237ff5d34a4"
  }; 
    
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const csvRef = ref(db, 'csvData');
    
    // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ï¼ˆAå´ã‚‚è‡ªåˆ†æ›´æ–°è¦‹ãˆã‚‹ï¼‰
    onValue(csvRef, (snapshot) => {
      const data = snapshot.val() || [];
      document.getElementById('status').innerHTML = 
        `ç¾åœ¨ãƒ‡ãƒ¼ã‚¿: ${data.length}è¡Œ<br>` +
        JSON.stringify(data.slice(0,3), null, 2);  // å…ˆé ­3è¡Œè¡¨ç¤º
    });
    
    window.updateData = function() {
      csvRef.child('0').update({status: true}).then(() => {
        document.getElementById('status').innerHTML += '<br>âœ… æ›´æ–°æˆåŠŸ';
      });
    };
    
    window.addRow = function() {
      const newId = Date.now();
      set(csvRef.child(newId.toString()), {
        id: newId,
        name: `NewItem-${newId}`,
        status: false
      });
    };
    
    // åˆæœŸãƒ‡ãƒ¼ã‚¿ï¼ˆåˆå›ã®ã¿ï¼‰
    set(csvRef, {
      '0': {id:1, name:'Item1', status: false},
      '1': {id:2, name:'Item2', status: false},
      '2': {id:3, name:'Item3', status: false}
    });
  </script>
</body>
</html>
