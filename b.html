<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Bå´ - Firebase CSVãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º</title>
  <style>table {border-collapse: collapse;} th,td {border:1px solid #ccc; padding:8px;}</style>
</head>
<body>
  <h1>ğŸ“± Bå´: Aå´ã®å¤‰æ›´å³åæ˜ </h1>
  <div id="display">æ¥ç¶šä¸­...</div>

  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js';
    import { getDatabase, ref, onValue } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js';
    
    const firebaseConfig = {
    apiKey: "AIzaSyDyr-r4YdBjark6GpoUgPBtW8NLMj6hUjE",
    authDomain: "csv-sync-app-35682.firebaseapp.com",
    databaseURL: "https://csv-sync-app-35682-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "csv-sync-app-35682",
    storageBucket: "csv-sync-app-35682.firebasestorage.app",
    messagingSenderId: "748623311917",
    appId: "1:748623311917:web:0a1118a75dd237ff5d34a4"
  }; 
    
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const csvRef = ref(db, 'csvData');
    
    onValue(csvRef, (snapshot) => {
      const dataObj = snapshot.val() || {};
      const data = Object.values(dataObj).sort((a,b) => a.id - b.id);
      
      if (data.length === 0) {
        document.getElementById('display').innerHTML = 'Aå´ã§åˆå›ã‚¢ã‚¯ã‚»ã‚¹ä¸­...';
        return;
      }
      
      let html = '<table><tr><th>ID</th><th>Name</th><th>Status</th></tr>';
      data.forEach(row => {
        html += `<tr>
          <td>${row.id}</td>
          <td>${row.name}</td>
          <td style="color:${row.status ? 'green' : 'red'}">${row.status ? 'âœ…å®Œäº†' : 'âŒæœª'}</td>
        </tr>`;
      });
      html += '</table>';
      document.getElementById('display').innerHTML = html;
    });
  </script>
</body>
</html>
